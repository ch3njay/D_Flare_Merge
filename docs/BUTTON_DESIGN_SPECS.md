# D-FLARE 按鈕設計規範

## 🎨 設計目標

解決問題：**按鈕容易融入背景，不夠醒目**

設計原則：
1. ✨ **高可見性**：無論在什麼背景下都清晰可見
2. 🎭 **層次感**：漸層 + 邊框 + 陰影 = 立體效果
3. 🌈 **品牌一致性**：使用主題橘色 (#FF6B35)
4. 💫 **互動反饋**：懸停/點擊有明顯動畫效果

---

## 🎨 視覺效果層次

### 按鈕解剖結構

```
┌────────────────────────────────────────┐
│  外層光暈（box-shadow 擴散）            │
│  ┌──────────────────────────────────┐  │
│  │  邊框（2px solid）                │  │
│  │  ┌────────────────────────────┐  │  │
│  │  │  漸層背景（135deg）         │  │  │
│  │  │  ┌──────────────────────┐  │  │  │
│  │  │  │  內發光（inset shadow）│  │  │  │
│  │  │  │  ┌────────────────┐  │  │  │  │
│  │  │  │  │  文字（白色）   │  │  │  │  │
│  │  │  │  │  + 文字陰影     │  │  │  │  │
│  │  │  │  └────────────────┘  │  │  │  │
│  │  │  └──────────────────────┘  │  │  │
│  │  └────────────────────────────┘  │  │
│  └──────────────────────────────────┘  │
└────────────────────────────────────────┘
```

---

## 🎯 按鈕類型與樣式

### 1. Primary 按鈕（主要動作）

**用途**：重要操作，如「開始分析」、「提交」、「確認」

**視覺規格**：
```css
background: linear-gradient(135deg, 
    #FF6B35 0%,           /* 主橘色 */
    #FF8A50 50%,          /* 中間色 */
    #FFB088 100%);        /* 淺橘色 */
border: 2px solid #FF6B35;
border-radius: 10px;
padding: 0.75rem 2rem;
color: white;
font-weight: 600;
text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);

/* 三層陰影 */
box-shadow: 
    0 6px 20px rgba(255, 107, 53, 0.40),    /* 外層橘色光暈 */
    0 3px 6px rgba(0, 0, 0, 0.15),          /* 中層基礎陰影 */
    inset 0 1px 0 rgba(255, 255, 255, 0.3); /* 內層高光 */
```

**互動效果**：
- **Hover**：上浮 2px + 放大 102% + 陰影增強 + 亮度 +10%
- **Active**：下壓 + 內陰影模擬按下效果

**視覺示意**：
```
┌─────────────────────────┐
│                         │  ← 橘色光暈（擴散 20px）
│  ┌───────────────────┐  │
│  │  ╔═════════════╗  │  │  ← 橘色邊框（2px）
│  │  ║ 🚀 開始分析  ║  │  │  ← 漸層背景 + 白色文字
│  │  ╚═════════════╝  │  │
│  └───────────────────┘  │
└─────────────────────────┘

Hover 狀態：
↑ 向上浮起 2px
┌─────────────────────────┐
│                         │  ← 光暈變強 45%
│  ┌───────────────────┐  │
│  │  ╔═════════════╗  │  │  ← 邊框變亮
│  │  ║ 🚀 開始分析  ║  │  │  ← 整體放大 102%
│  │  ╚═════════════╝  │  │
│  └───────────────────┘  │
└─────────────────────────┘
```

---

### 2. Secondary 按鈕（次要動作）

**用途**：次要操作，如「取消」、「返回」、「查看詳情」

**視覺規格**：
```css
background: linear-gradient(135deg, 
    rgba(255, 255, 255, 0.1) 0%,   /* 半透明白 */
    rgba(255, 255, 255, 0.05) 100%);
border: 2px solid #FF6B35;          /* 橘色邊框 */
border-radius: 10px;
padding: 0.75rem 2rem;
color: #FF6B35;                     /* 橘色文字 */
backdrop-filter: blur(20px);        /* 毛玻璃效果 */

/* 較淡的陰影 */
box-shadow: 
    0 4px 12px rgba(255, 107, 53, 0.20),    /* 淡橘色光暈 */
    0 2px 4px rgba(0, 0, 0, 0.1),           /* 基礎陰影 */
    inset 0 1px 0 rgba(255, 255, 255, 0.1); /* 內層高光 */
```

**互動效果**：
- **Hover**：背景填充淡橘色 25% + 文字變亮
- **Active**：背景變深 + 下壓效果

**視覺示意**：
```
┌─────────────────────────┐
│                         │  ← 淡橘色光暈（20%）
│  ┌───────────────────┐  │
│  │  ╔═════════════╗  │  │  ← 橘色邊框（2px）
│  │  ║   取消      ║  │  │  ← 半透明背景 + 橘色文字
│  │  ╚═════════════╝  │  │
│  └───────────────────┘  │
└─────────────────────────┘

Hover 狀態：
┌─────────────────────────┐
│                         │
│  ┌───────────────────┐  │
│  │  ╔═════════════╗  │  │  ← 背景填充淡橘色
│  │  ║   取消      ║  │  │  ← 文字變亮
│  │  ╚═════════════╝  │  │
│  └───────────────────┘  │
└─────────────────────────┘
```

---

### 3. 預設按鈕（一般動作）

**用途**：常規操作，如「Run binary inference」

**視覺規格**：與 Primary 按鈕相同（確保所有按鈕都醒目）

---

## 🎬 動畫效果規範

### 過渡動畫

```css
transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
```

**解析**：
- `all`：所有屬性都有過渡效果
- `0.3s`：動畫時長 300ms
- `cubic-bezier(0.4, 0, 0.2, 1)`：Material Design 標準緩動曲線（ease-out）

### 狀態變化

| 狀態 | 位移 | 縮放 | 陰影 | 邊框 |
|------|------|------|------|------|
| **Normal** | 0 | 100% | 標準 | 標準 |
| **Hover** | -2px | 102% | 增強 45% | 變亮 110% |
| **Active** | 0 | 98% | 減弱 30% | 標準 |

---

## 🌈 顏色規範

### 主題橘色系

```css
/* 基礎色 */
--primary-color: #FF6B35;           /* 主橘色 */

/* 衍生色（使用 color-mix 動態生成） */
--primary-80: color-mix(in srgb, var(--primary-color) 80%, white);   /* 較淡 */
--primary-85: color-mix(in srgb, var(--primary-color) 85%, white);   /* 淡 */
--primary-110: color-mix(in srgb, var(--primary-color) 110%, white); /* 較亮 */
--primary-120: color-mix(in srgb, var(--primary-color) 120%, white); /* 亮 */

/* 陰影色（使用透明度） */
--shadow-light: rgba(255, 107, 53, 0.20);   /* 20% 淡陰影 */
--shadow-medium: rgba(255, 107, 53, 0.35);  /* 35% 中等陰影 */
--shadow-strong: rgba(255, 107, 53, 0.45);  /* 45% 強陰影 */
```

### 中性色

```css
/* 黑色陰影 */
--shadow-dark: rgba(0, 0, 0, 0.1);    /* 10% 淺黑陰影 */
--shadow-darker: rgba(0, 0, 0, 0.15); /* 15% 黑陰影 */
--shadow-inset: rgba(0, 0, 0, 0.2);   /* 20% 內陰影 */

/* 白色高光 */
--highlight-soft: rgba(255, 255, 255, 0.1);  /* 10% 軟高光 */
--highlight-medium: rgba(255, 255, 255, 0.2); /* 20% 中等高光 */
--highlight-strong: rgba(255, 255, 255, 0.3); /* 30% 強高光 */
```

---

## 📐 尺寸規範

### 按鈕大小

| 類型 | 高度 | 內距 | 字體大小 | 字重 |
|------|------|------|---------|------|
| **Large** | 48px | 1rem 2.5rem | 16px | 600 |
| **Normal** | 40px | 0.75rem 2rem | 14px | 600 |
| **Small** | 32px | 0.5rem 1.5rem | 13px | 600 |

### 圓角

```css
border-radius: 10px;  /* 標準圓角 */
```

### 邊框

```css
border: 2px solid var(--primary-color);  /* 2px 實線邊框 */
```

---

## 🎯 對比度與可訪問性

### 顏色對比度

| 組合 | 對比度 | WCAG 等級 |
|------|--------|-----------|
| 白色文字 + 橘色背景 | 4.2:1 | AA ✅ |
| 橘色文字 + 淺色背景 | 4.8:1 | AA+ ✅ |
| 橘色文字 + 深色背景 | 5.1:1 | AAA ✅ |

### 互動反饋

- ✅ **視覺反饋**：懸停時顏色變化 + 位移動畫
- ✅ **觸覺反饋**：點擊時下壓效果模擬真實按鈕
- ✅ **焦點指示**：鍵盤導航時有明顯邊框高亮

---

## 💡 實作細節

### CSS 選擇器優先級

確保樣式套用到**所有**按鈕類型：

```css
/* 涵蓋所有可能的按鈕選擇器 */
.stButton > button,               /* Streamlit 包裝的按鈕 */
button[kind="primary"],           /* Primary 類型 */
button[kind="secondary"],         /* Secondary 類型 */
button[data-testid="baseButton-primary"],    /* 測試 ID */
button[data-testid="baseButton-secondary"] { /* 測試 ID */
    /* 統一樣式 */
}
```

### !important 使用

```css
/* 必要時使用 !important 確保覆蓋 Streamlit 預設樣式 */
background: ... !important;
border: ... !important;
box-shadow: ... !important;
```

⚠️ **注意**：只在需要覆蓋 Streamlit 內建樣式時使用 `!important`

---

## 🧪 測試檢查表

### 視覺測試

- [ ] 按鈕在淺色背景上清晰可見
- [ ] 按鈕在深色背景上清晰可見
- [ ] Primary 和 Secondary 按鈕有明顯區別
- [ ] 漸層效果平滑自然
- [ ] 邊框清晰可見
- [ ] 陰影效果立體感強

### 互動測試

- [ ] 懸停時有明顯動畫（上浮 + 放大）
- [ ] 點擊時有按下效果
- [ ] 動畫流暢不卡頓（60fps）
- [ ] 鍵盤 Tab 導航可正常使用
- [ ] Enter 鍵可觸發點擊

### 響應式測試

- [ ] 手機尺寸下按鈕不會過小（最小 44x44px）
- [ ] 平板尺寸下按鈕大小適中
- [ ] 桌面尺寸下按鈕不會過大

### 瀏覽器相容性

- [ ] Chrome/Edge（Chromium）
- [ ] Firefox
- [ ] Safari
- [ ] 行動版瀏覽器

---

## 📝 使用範例

### Python 程式碼

```python
import streamlit as st

# Primary 按鈕（強調動作）
if st.button("🚀 開始分析", type="primary"):
    st.success("分析已開始！")

# Secondary 按鈕（次要動作）
if st.button("📊 查看報表", type="secondary"):
    st.info("正在載入報表...")

# 預設按鈕（一般動作）
if st.button("Run binary inference"):
    st.write("執行二元推論...")
```

### 預期視覺效果

```
主頁面（深色背景 #0F1419）
┌────────────────────────────────────┐
│                                    │
│  ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓  │
│  ┃  🚀 開始分析           ┃  │  ← Primary（橘色漸層 + 白字）
│  ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛  │
│          ↑ 橘色光暈                │
│                                    │
│  ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓  │
│  ┃  📊 查看報表           ┃  │  ← Secondary（透明 + 橘邊框）
│  ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛  │
│                                    │
│  ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓  │
│  ┃  Run binary inference  ┃  │  ← 預設（橘色漸層 + 白字）
│  ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛  │
│                                    │
└────────────────────────────────────┘
```

---

## 🎨 設計變體（可選）

### 變體 1：扁平化風格

```css
/* 移除漸層，使用純色 + 加強邊框 */
background: var(--primary-color) !important;
border: 3px solid var(--primary-color) !important;
```

### 變體 2：玻璃擬態

```css
/* 增強毛玻璃效果 */
background: rgba(255, 107, 53, 0.2) !important;
backdrop-filter: blur(30px) saturate(180%) !important;
border: 1px solid rgba(255, 107, 53, 0.5) !important;
```

### 變體 3：霓虹風格

```css
/* 增強發光效果 */
box-shadow: 
    0 0 20px rgba(255, 107, 53, 0.6),
    0 0 40px rgba(255, 107, 53, 0.4),
    0 0 60px rgba(255, 107, 53, 0.2) !important;
```

---

## 🔧 疑難排解

### 問題：按鈕樣式沒有套用

**原因**：Streamlit 預設樣式優先級更高

**解決方案**：
1. 確認 CSS 選擇器包含所有類型
2. 使用 `!important` 強制覆蓋
3. 檢查瀏覽器開發者工具確認 CSS 載入

### 問題：按鈕在某些背景下不可見

**原因**：對比度不足

**解決方案**：
1. 增加邊框寬度（2px → 3px）
2. 加強陰影效果
3. 使用更高對比度的顏色

### 問題：動畫卡頓

**原因**：過多的 box-shadow 導致重繪

**解決方案**：
1. 減少陰影層數（3 層 → 2 層）
2. 使用 `will-change: transform` 提示瀏覽器優化
3. 只在必要時使用複雜動畫

---

## 📊 效能指標

### 目標效能

| 指標 | 目標值 | 說明 |
|------|--------|------|
| **動畫幀率** | 60 FPS | 流暢動畫 |
| **首次繪製** | < 16ms | 避免閃爍 |
| **重繪時間** | < 10ms | 懸停反應靈敏 |

### 優化建議

1. ✅ 使用 `transform` 而非 `top/left`（GPU 加速）
2. ✅ 使用 `opacity` 而非 `visibility`（硬體加速）
3. ✅ 避免在動畫中改變 `box-shadow`（改用 `filter: drop-shadow()`）

---

## 📚 參考資源

- [Material Design - Buttons](https://material.io/components/buttons)
- [WCAG 2.1 對比度指南](https://www.w3.org/WAI/WCAG21/Understanding/contrast-minimum.html)
- [CSS Tricks - Box Shadow](https://css-tricks.com/almanac/properties/b/box-shadow/)
- [MDN - color-mix()](https://developer.mozilla.org/en-US/docs/Web/CSS/color_value/color-mix)

---

**維護者**：D-FLARE 開發團隊  
**最後更新**：2025年10月9日  
**版本**：v2.1.0
